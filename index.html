<!DOCTYPE html>
<html>
    <head>
        <title>linear regression</title>
        <style>
            #chart svg {
                border:1px solid #000;
            }
            circle.dot {
                fill:#000;
            }
            path.linreg {
                stroke-width:5;
                stroke:black;
            }
        </style>
    </head>
    <body>
        <div id='chart'></div>
        <script src='http://d3js.org/d3.v2.js?2.9.1'></script>
        <script src='linearregression.js'></script>
        <script>
    var width = 600, height = 400;
    var d = [[250, 250]];
    var vis = d3.select("#chart")
    .append("svg")
      .attr("width", width)
      .attr("height", height);

    var x = d3.scale.linear()
        .domain([0, 600])
        .range([0, 600]);

    var y = d3.scale.linear()
        .domain([0, 400])
        .range([0, 400]);
    var linreg = linearregression();

    var fit = vis.append('path')
        .attr('class', 'linreg');

    function draw() {

        linreg.data(d);

        var dots = vis.selectAll('circle.dot')
            .data(d)
            .enter()
            .append('circle')
            .attr('class', 'dot')
            .attr('r', 5)
            .attr('cx', function(d) { return d[0]; })
            .attr('cy', function(d) { return d[1]; });

        fit.attr('d', function() { return 'M' + linreg.path(); });
    }

    vis.on('click', function() {
        d.push(d3.mouse(vis.node()));
        draw();
    });

    draw();
        </script>
    </body>
</html>
